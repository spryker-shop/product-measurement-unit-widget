{% extends template('widget') %}

{% define data = {
    cartItem: _widget.itemTransfer,
    quantitySalesUnit: _widget.quantitySalesUnit,
    quantitySalesUnitPrecision: _widget.quantitySalesUnitPrecision | default(null),
} %}

{% set hasQuantitySalesUnit = data.quantitySalesUnit.idProductMeasurementSalesUnit | default(false) %}

{%- block hasSalesUnit -%}
    {{- hasQuantitySalesUnit -}}
{%- endblock -%}

{% block body %}
    {% include molecule('cart-quantity-input', 'CartPage') with {
        data: {
            cartItem: data.cartItem,
            readOnly: hasQuantitySalesUnit
        }
    } only %}

    {% block quantitySalesUnit %}
        {% include molecule('measurement-unit-item') with {
            class: 'spacing spacing--reset',
            data: {
                cartItem: data.cartItem,
                quantitySalesUnit: data.quantitySalesUnit,
                quantitySalesUnitPrecision: data.quantitySalesUnitPrecision,
                hasQuantitySalesUnit: hasQuantitySalesUnit,
            },
        } only %}
    {% endblock %}
{% endblock %}
