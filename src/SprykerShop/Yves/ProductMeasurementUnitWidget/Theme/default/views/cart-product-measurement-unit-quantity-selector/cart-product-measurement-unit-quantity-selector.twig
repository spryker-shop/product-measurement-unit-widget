{% extends template('widget') %}

{% define data = {
    cartItem: _widget.itemTransfer,
    quantitySalesUnit: _widget.quantitySalesUnit,
    quantitySalesUnitPrecision: _widget.quantitySalesUnitPrecision | default(null),
} %}

{% set hasQuantitySalesUnit = data.quantitySalesUnit.idProductMeasurementSalesUnit | default(false) %}

{%- block hasSalesUnit -%}
    {{- hasQuantitySalesUnit -}}
{%- endblock -%}

{% block body %}
    {% include molecule('cart-quantity-input', 'CartPage') with {
        data: {
            cartItem: data.cartItem,
            readOnly: hasQuantitySalesUnit,
        },
    } only %}

    {% if hasQuantitySalesUnit %}
        {% block quantitySalesUnit %}
            <small class="text-secondary">
                {% block quantitySalesUnitInner %}
                    [= {{ data.quantitySalesUnitPrecision }} {{ data.quantitySalesUnit.productMeasurementUnit.name | default | trans }}]
                {% endblock %}
            </small>
        {% endblock %}
    {% endif %}
{% endblock %}
