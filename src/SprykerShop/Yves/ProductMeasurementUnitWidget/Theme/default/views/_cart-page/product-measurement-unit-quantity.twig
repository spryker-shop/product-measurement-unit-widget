{% extends template('widget') %}
{% define data = {
    cartItem: _widget.itemTransfer,
    isBaseUnit: _widget.isBaseUnit
} %}
{% set cartItem = data.cartItem %}
{% set salesUnitName = cartItem.quantitySalesUnit.productMeasurementUnit.name | default('') %}

{% block body %}
    {% if not cartItem.maxQuantity or cartItem.maxQuantity < 0 %}
        <input class="input-group-field" type="number" value="{{ cartItem.quantity }}" {% if not data.isBaseUnit %} disabled {% endif %} name="quantity" {{qa('cart-change-quantity-input')}}>
    {% else %}
        <select name="quantity" {% if not data.isBaseUnit %} disabled {% endif %}>
            {% for i in range(1, cartItem.maxQuantity) %}
                <option {{ (i == cartItem.quantity) ? 'selected' : '' }} value="{{ i }}">{{ i }}</option>
            {% endfor %}
        </select>
    {% endif %}
    <span>{{ salesUnitName | trans }}</span>
{% endblock %}
